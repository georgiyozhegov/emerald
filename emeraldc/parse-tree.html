<!doctype html>
<html lang="en">
  <head>
    <meta
      name="generator"
      content="HTML Tidy for HTML5 for Linux version 5.7.45"
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Parse Tree Visualization</title>
    <meta
      name="description"
      content="An interactive parse tree visualization"
    />
    <meta name="author" content="Georgiy Ozhegov" />
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }

      main {
        width: 100%;
        height: 100%;
        display: flex;
      }

      #source-code {
        display: flex;
        flex-wrap: wrap;
        align-content: flex-start;
        width: 100%;
        height: 100%;
        overflow-y: auto;
        font-family: courier;
        font-size: 21px;
        background-color: #282828;
        tab-size: 4;
      }

      .node {
        display: inline;
        padding: 0px;
        border-radius: 5px;
        border: 1px solid transparent;
        white-space: pre;
      }

      .node:hover {
        cursor: pointer;
        border-color: white;
      }

      .identifier {
        color: #fabd2f;
      }

      .integer {
        color: #d3869b;
      }

      .keyword {
        color: #dd584a;
      }

      .punctuation {
        color: #a89984;
      }

      .whitespace {
        color: #928374;
        opacity: 50%;
      }

      .newline {
        color: #928374;
        opacity: 50%;
      }

      .newline-break {
        flex-basis: 100%;
        height: 0;
      }

      .error {
        color: #dd584a;
        text-decoration: wavy underline;
      }

      #pop-up {
        display: none;
        position: absolute;
        background: #ccc;
        border-radius: 6px;
        padding: 10px;
        z-index: 1000;
        font-family: system-ui;
        font-size: 16px;
        box-sizing: border-box;
        opacity: 70%;
      }

      #pop-up th {
        text-align: right;
      }
    </style>
  </head>
  <body>
    <main>
      <div id="source-code">
        
        <span
          class="node keyword"
          data-kind="keyword"
          data-text="function"
          data-message=""
          >function</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node identifier"
          data-kind="identifier"
          data-text="main"
          data-message=""
          >main</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text="("
          data-message=""
          >(</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text=")"
          data-message=""
          >)</span
        >
         
        <span
          class="node newline"
          data-kind="newline"
          data-text="↵"
          data-message="&lt;newline&gt;"
          >↵</span
        >
        
        <div class="newline-break"></div>
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="	"
          data-message="&lt;tab&gt;"
          >	</span
        >
         
        <span
          class="node keyword"
          data-kind="keyword"
          data-text="let"
          data-message=""
          >let</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node identifier"
          data-kind="identifier"
          data-text="a"
          data-message=""
          >a</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text="="
          data-message=""
          >=</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text="("
          data-message=""
          >(</span
        >
         
        <span
          class="node integer"
          data-kind="integer"
          data-text="1"
          data-message=""
          >1</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text="+"
          data-message=""
          >+</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node integer"
          data-kind="integer"
          data-text="2"
          data-message=""
          >2</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text=")"
          data-message=""
          >)</span
        >
         
        <span
          class="node newline"
          data-kind="newline"
          data-text="↵"
          data-message="&lt;newline&gt;"
          >↵</span
        >
        
        <div class="newline-break"></div>
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="	"
          data-message="&lt;tab&gt;"
          >	</span
        >
         
        <span
          class="node keyword"
          data-kind="keyword"
          data-text="let"
          data-message=""
          >let</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node identifier"
          data-kind="identifier"
          data-text="b"
          data-message=""
          >b</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text="="
          data-message=""
          >=</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node error"
          data-kind="error"
          data-text="end"
          data-message="unexpected token: EndKeyword"
          >end</span
        >
         
        <span
          class="node newline"
          data-kind="newline"
          data-text="↵"
          data-message="&lt;newline&gt;"
          >↵</span
        >
        
        <div class="newline-break"></div>
         
        <span
          class="node keyword"
          data-kind="keyword"
          data-text="end"
          data-message=""
          >end</span
        >
         
        <span
          class="node newline"
          data-kind="newline"
          data-text="↵"
          data-message="&lt;newline&gt;"
          >↵</span
        >
        
        <div class="newline-break"></div>
         
        <span
          class="node newline"
          data-kind="newline"
          data-text="↵"
          data-message="&lt;newline&gt;"
          >↵</span
        >
        
        <div class="newline-break"></div>
         
        <span
          class="node keyword"
          data-kind="keyword"
          data-text="function"
          data-message=""
          >function</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node identifier"
          data-kind="identifier"
          data-text="boo"
          data-message=""
          >boo</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text="("
          data-message=""
          >(</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text=")"
          data-message=""
          >)</span
        >
         
        <span
          class="node newline"
          data-kind="newline"
          data-text="↵"
          data-message="&lt;newline&gt;"
          >↵</span
        >
        
        <div class="newline-break"></div>
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="	"
          data-message="&lt;tab&gt;"
          >	</span
        >
         
        <span
          class="node keyword"
          data-kind="keyword"
          data-text="let"
          data-message=""
          >let</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node identifier"
          data-kind="identifier"
          data-text="foo"
          data-message=""
          >foo</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node punctuation"
          data-kind="punctuation"
          data-text="="
          data-message=""
          >=</span
        >
         
        <span
          class="node whitespace"
          data-kind="whitespace"
          data-text="·"
          data-message="&lt;whitespace&gt;"
          >·</span
        >
         
        <span
          class="node integer"
          data-kind="integer"
          data-text="111"
          data-message=""
          >111</span
        >
         
        <span
          class="node newline"
          data-kind="newline"
          data-text="↵"
          data-message="&lt;newline&gt;"
          >↵</span
        >
        
        <div class="newline-break"></div>
         
        <span
          class="node keyword"
          data-kind="keyword"
          data-text="end"
          data-message=""
          >end</span
        >
         
      </div>
      <div id="pop-up">
        <table>
          <tr>
            <th>kind</th>
            <td id="node-kind"></td>
          </tr>
          <tr>
            <th>text</th>
            <td id="node-text"></td>
          </tr>
          <tr>
            <th>message</th>
            <td id="node-message"></td>
          </tr>
        </table>
      </div>
    </main>
    <script>
      const popUp = document.getElementById("pop-up");
      const nodeKind = document.getElementById("node-kind");
      const nodeText = document.getElementById("node-text");
      const nodeMessage = document.getElementById("node-message");

      document.querySelectorAll(".node").forEach(function (node) {
        node.addEventListener("mouseover", showPopUp);
        node.addEventListener("mouseout", hidePopUp);
      });

      function showPopUp(event) {
        let node = event.target;
        const data = node.dataset;
        alignWithCursor(popUp, event.pageX, event.pageY, 10);
        nodeKind.innerHTML = data.kind;
        nodeText.innerHTML = data.text;
        nodeMessage.innerHTML = data.message;
        makeVisible(popUp);
      }

      function alignWithCursor(element, cursorX, cursorY, shift) {
        element.style.left = `${cursorX + shift}px`;
        element.style.top = `${cursorY + shift}px`;
      }

      function makeVisible(element) {
        element.style.display = "block";
      }

      function hidePopUp(event) {
        popUp.style.display = "none";
      }
    </script>
  </body>
</html>
